// This file is automatically generated by Keystone, do not modify it manually.
// Modify your Keystone config when you want to change this.

datasource mysql {
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
  provider          = "mysql"
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id                 String  @id @default(cuid())
  name               String  @default("")
  email              String  @unique @default("")
  password           String
  role               String? @default("manager")
  managedMalls       Mall[]  @relation("User_managedMalls")
  from_Mall_managers Mall[]  @relation("Mall_managers")
}

model Mall {
  id                     String  @id @default(cuid())
  name                   String  @default("")
  city                   String  @default("")
  address                String  @default("")
  managers               User[]  @relation("Mall_managers")
  stores                 Store[] @relation("Mall_stores")
  from_User_managedMalls User[]  @relation("User_managedMalls")
  from_Store_mall        Store[] @relation("Store_mall")
}

model Store {
  id                 String    @id @default(cuid())
  name               String    @default("")
  storeNumber        String    @default("")
  floor              String    @default("")
  area               Decimal   @mysql.Decimal(18, 4)
  rentAmount         Decimal   @mysql.Decimal(18, 4)
  mall               Mall?     @relation("Store_mall", fields: [mallId], references: [id])
  mallId             String?   @map("mall")
  client             Client?   @relation("Store_client", fields: [clientId], references: [id])
  clientId           String?   @map("client")
  payments           Payment[] @relation("Store_payments")
  from_Mall_stores   Mall[]    @relation("Mall_stores")
  from_Client_stores Client[]  @relation("Client_stores")
  from_Payment_store Payment[] @relation("Payment_store")

  @@index([mallId])
  @@index([clientId])
}

model Client {
  id                String  @id @default(cuid())
  name              String  @default("")
  companyName       String  @default("")
  email             String  @unique @default("")
  phone             String  @default("")
  taxNumber         String  @unique @default("")
  stores            Store[] @relation("Client_stores")
  from_Store_client Store[] @relation("Store_client")
}

model Payment {
  id                  String    @id @default(cuid())
  store               Store?    @relation("Payment_store", fields: [storeId], references: [id])
  storeId             String?   @map("store")
  amount              Decimal   @mysql.Decimal(18, 4)
  paymentDate         DateTime?
  month               String    @default("")
  year                String    @default("")
  status              String?   @default("pending")
  from_Store_payments Store[]   @relation("Store_payments")

  @@index([storeId])
}
